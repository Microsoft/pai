---
- name: Output worker machines' os variables
  debug:
    var: "{{ item }}"
  with_items:
    - ansible_distribution
    - ansible_distribution_version
    - ansible_control_host_address

- name: Check ubuntu requirement. OpenPAI only supports ubuntu now.
  include_tasks: ubuntu.yml
  when: ansible_distribution == "Ubuntu" and ansible_distribution_version == "16.04"

- name: Worker machines' os is not ubuntu.
  fail:
    msg: "Please ensure your worker machines' os is ubuntu 16.04 lts. 18.04 should be ok, but have not tested it yet"
  when: ansible_distribution != "Ubuntu" or ansible_distribution_version != "16.04"



