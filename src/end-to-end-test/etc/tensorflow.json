{
  "jobName": "tensorflow-distributed-cifar10-distributed",
  "image": "openpai/pai.example.tensorflow",
  "dataDir": "HDFS_URI/Test/tensorflow/cifar-10-batches-py",
  "outputDir": "HDFS_URI/Test/tensorflow/output",
  "codeDir": "HDFS_URI/Test/tensorflow/benchmarks",
  "taskRoles": [
    {
      "name": "ps_server",
      "taskNumber": 1,
      "cpuNumber": 2,
      "memoryMB": 4096,
      "gpuNumber": 0,
      "command": "pip --quiet install scipy && ls . && python benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --num_batches=1 --local_parameter_device=cpu --batch_size=32 --model=resnet20 --variable_update=parameter_server --data_dir=$PAI_DATA_DIR --data_name=cifar10 --train_dir=$PAI_OUTPUT_DIR --ps_hosts=$PAI_TASK_ROLE_ps_server_HOST_LIST --worker_hosts=$PAI_TASK_ROLE_worker_HOST_LIST --job_name=ps --task_index=$PAI_CURRENT_TASK_ROLE_CURRENT_TASK_INDEX"
    },
    {
      "name": "worker",
      "taskNumber": 1,
      "cpuNumber": 2,
      "memoryMB": 4096,
      "gpuNumber": 1,
      "command": "pip --quiet install scipy && ls . && python benchmarks/scripts/tf_cnn_benchmarks/tf_cnn_benchmarks.py --num_batches=1 --local_parameter_device=gpu --batch_size=32 --model=resnet20 --variable_update=parameter_server --data_dir=$PAI_DATA_DIR --data_name=cifar10 --train_dir=$PAI_OUTPUT_DIR --ps_hosts=$PAI_TASK_ROLE_ps_server_HOST_LIST --worker_hosts=$PAI_TASK_ROLE_worker_HOST_LIST --job_name=worker --task_index=$PAI_CURRENT_TASK_ROLE_CURRENT_TASK_INDEX",
      "minSucceededTaskCount": 1
    }
  ],
  "retryCount": 0
}
